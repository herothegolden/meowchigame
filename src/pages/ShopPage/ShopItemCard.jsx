// src/pages/ShopPage/ShopItemCard.jsx
// v4 ‚Äî Pastel Gradient Design + Russian Text, No Function Change

import React from "react";
import { Star, LoaderCircle, CheckCircle } from "lucide-react";

const ShopItemCard = ({
  item,
  userPoints,
  onPurchase,
  isOwned,
  ownedQuantity = 0,
  isPurchasing,
  icon,
}) => {
  const canAfford = userPoints >= item.price;

  // determine pastel gradient by category
  const getGradient = () => {
    if (item.name.includes("Time")) return "from-[#C6FFE0] to-[#B2F5EA]"; // Mint
    if (item.name.includes("Bomb")) return "from-[#FFD6E8] to-[#FFC6C6]"; // Rose
    if (item.name.includes("Points")) return "from-[#E4D7FF] to-[#DAD0FF]"; // Lilac
    return "from-[#F8F8F8] to-[#EAEAEA]";
  };

  return (
    <div
      className={`bg-gradient-to-r ${getGradient()} text-gray-900 rounded-2xl p-4 mb-3 flex flex-col justify-between shadow-sm`}
    >
      {/* HEADER / TITLE */}
      <div className="mb-2">
        {item.name.includes("Time") && (
          <>
            <p className="text-[18px] font-semibold mb-0.5">‚è∞ –¢–∞–π–º-–ë—É—Å—Ç–∏</p>
            <p className="text-[13px] text-[#9AA0A6] mb-1">(Time Boosters)</p>
            <p className="text-[15px] font-medium">Ï´ÄÎìù Vibe Upgrade ‚è≥</p>
            <p className="text-[15px]">
              +10 —Å–µ–∫—É–Ω–¥ –Ω–∞—Å–ª–∞–∂–¥–µ–Ω–∏—è<br />
              –ï—â—ë –Ω–µ–º–Ω–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–π–º–∞—Ç—å —Ç–æ—Ç –∏–¥–µ–∞–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç —á–ø–æ–Ω—å–∫!<br />
              –í—Ä–µ–º—è = –≤–∫—É—Å, –Ω–µ —Ü–∏—Ñ—Ä–∞.
            </p>
          </>
        )}

        {item.name.includes("Bomb") && (
          <>
            <p className="text-[18px] font-semibold mb-0.5">üí£ Ïø†ÌÇ§-–ë–æ–º–±—ã</p>
            <p className="text-[13px] text-[#9AA0A6] mb-1">(Cookie Bombs)</p>
            <p className="text-[15px] font-medium">Cookie Bomb üí•</p>
            <p className="text-[15px]">
              –ù–∞—á–Ω–∏ —Å –º—è–≥–∫–∏–º –≤–∑—Ä—ã–≤–æ–º ‚Äî –æ—á–∏—Å—Ç–∏ 3√ó3 –ø–æ–ª–µ –∏ –æ—Å—Ç–∞–≤—å –∑–∞ —Å–æ–±–æ–π —Å–ª–∞–¥–∫–∏–π —Ö–∞–æ—Å.<br />
              Ï´ÄÎìù-–≤–∏–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.
            </p>
          </>
        )}

        {item.name.includes("Points") && (
          <>
            <p className="text-[18px] font-semibold mb-0.5">‚ú® –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ –û—á–∫–æ–≤</p>
            <p className="text-[13px] text-[#9AA0A6] mb-1">(Point Multipliers)</p>
            <p className="text-[15px] font-medium">–î–≤–æ–π–Ω—ã–µ –û—á–∫–∏ ‚¨ÜÔ∏è</p>
            <p className="text-[15px]">
              2√ó –æ—á–∫–æ–≤. 2√ó —Ç–µ–∫—Å—Ç—É—Ä—ã. Ï´ÄÎìù-–≤–∏–±—ã –Ω–∞ –ø—Ä–µ–¥–µ–ª–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ —Å—á–∞—Å—Ç—å—è.<br />
              –ò–≥—Ä–∞ —Ä–∞–¥–∏ –≤–∞–π–±–∞, –∞ –Ω–µ —Ä–∞–¥–∏ –ø–æ–±–µ–¥—ã.
            </p>
          </>
        )}
      </div>

      {/* FOOTER BAR */}
      <div className="flex items-center justify-between mt-4">
        <div className="text-[14px] font-bold">
          –£ —Ç–µ–±—è: {ownedQuantity.toLocaleString()}
        </div>

        {isOwned && item.type === "permanent" ? (
          <div className="flex items-center text-green-600 font-bold">
            <CheckCircle className="w-4 h-4 mr-1" />
            –ö—É–ø–ª–µ–Ω–æ
          </div>
        ) : (
          <button
            onClick={() => onPurchase(item.id)}
            disabled={!canAfford || isPurchasing}
            className={`font-bold text-[14px] rounded-full py-1 px-4 flex items-center justify-center ${
              canAfford
                ? "bg-yellow-400 text-black"
                : "bg-gray-300 text-gray-500 cursor-not-allowed"
            }`}
          >
            {isPurchasing ? (
              <LoaderCircle className="w-4 h-4 animate-spin" />
            ) : (
              <>
                <Star className="w-4 h-4 mr-1" />
                {item.price.toLocaleString()}
              </>
            )}
          </button>
        )}
      </div>
    </div>
  );
};

export default ShopItemCard;
